// pages

function toggle_scroll_to_top_link() {
  var link_shown = false;
  $(window).bindWithDelay("scroll", function() {
    // show link when scrolled to the bottom and hide when scrolled back to top
    if (!link_shown && $(window).scrollTop() + $(window).height() > $(document).height() - 5) {
      $("#scroll_to_top_link").fadeIn();
      window.navigator.vibrate(1);
      link_shown = true;
    } else if (link_shown && $(window).scrollTop() < 10) {
      $("#scroll_to_top_link").fadeOut();
      window.navigator.vibrate(1);
      link_shown = false;
      // haptic feedback for scrolling to top
    } else if ($(window).scrollTop() < 10) {
      window.navigator.vibrate(1);
      toggle_top_line_faded();
      setTimeout(toggle_top_line_faded, 500);
    }
  }, 200);
  
  function toggle_top_line_faded() {
    $(".top_line_fader").toggleClass("top_line_faded");
  }
}

toggle_scroll_to_top_link();
