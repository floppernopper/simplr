<div class="card">
  <%= render "groups/avatar_card_link", group: group %>
    
  <div align="center">
    <p>
      <%= link_to group.name, group %>
    </p>
    <p>
      <%= group.description %>
    </p>
  </div>
  
  <%= render "app/time_ago", item: group %>
  <%= link_to "Members: #{group.members.size}", members_path(group), class: :bottom_left_link %>
  
  <% if group_auth group %>
    <%= link_to 'Edit', edit_group_path(group), class: :bottom_right_link %>
  <% else %>
    <% if group.members.find_by_user_id current_user.id %>
      <%= link_to 'Leave', leave_group_path(group.id), method: :delete, class: :bottom_right_link %>
    <% elsif not group.requests.find_by_user_id current_user.id %>
      <%= link_to 'Request to join', request_to_join_path(group.id), method: :post, class: :bottom_right_link %>
    <% else %>
      <%= link_to 'Request pending', group, class: :bottom_right_link %>
    <% end %>
  <% end %>
</div>
