<script>
  $(window).bindWithDelay("scroll", function() {
    $(".standard_content_card").each(function() {

      // gets height of screen and this post card
      var screen_height = $(window).height();
      var card_height = $(this).height();

      // gets margins between post and vertical
      var margins = screen_height - card_height;
      var margin = margins / 2;

      // how many px from top of card to top of screen
      var from_top = Math.abs($(this).offset().top - $(window).scrollTop());
      
      var dist_fr_center = Math.abs(margin - from_top);
      
      
      if (dist_fr_center <= 25) {
        // update avatar/user name
        var item_str = $(this).attr('id').split('_')
        var item_id = item_str[2];
		    var param = null; param = (item_str[0] == 'post') ? $.param({ post_id: item_id }) : $.param({ proposal_id: item_id });
		    $.ajax({
			    type: "GET",
			    url: "/users/update_scrolling_avatar",
			    data: param
		    });
      }
    });
    if ($(window).scrollTop() < 5) {
      $(".scrolling_avatar").each(function() {
        $(this).fadeOut();
      });
    }
  }, 50);
</script>
