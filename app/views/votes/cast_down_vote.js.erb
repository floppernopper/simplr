// votes

// proposal_id is actually declared/defined in new_up_vote
// and still accessible here from there

function remove_down_vote_form() {
  var for_link = $("#<%= "for_proposal_link_#{@proposal.id}" %>");
  var for_anchor = $("#<%= "for_proposal_link_anchor_#{@proposal.id}" %>");

  var against_link = $("#<%= "block_proposal_link_#{@proposal.id}" %>");
  var against_anchor = $("#<%= "block_proposal_link_anchor_#{@proposal.id}" %>");

  var new_vote_form = $("#new_down_vote_form_" + proposal_id);

  new_vote_form.remove();

  for_link.remove();
  for_anchor.after("<%=j render "votes/for_link", item: @proposal %>");

  against_link.remove();
  against_anchor.after("<%=j render "votes/against_link", item: @proposal %>");
}

remove_down_vote_form();

<% if @vote_cast_successful %>
  $("#new_vote_cast_anchor").after("<%=j render 'votes/card', vote: @down_vote if @down_vote.body.present? %>");
<% end %>

// sound and haptic feedback
$("#post_interface_sound")[0].currentTime = 0;
$("#post_interface_sound")[0].play();
window.navigator.vibrate(1);
